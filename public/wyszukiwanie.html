<!DOCTYPE html>
<html>
<head>
	<script src="/jquery.js"></script>
	<meta charset="utf-8">
	<title>Wyszukiwanie</title>
	<style>
		html{
			background-color:gray;
		}
		body{
			padding:20px;
			background-color:white;
			font-family:sans-serif;
			max-width:50rem;
			margin:0 auto;
		}
		.email{
			color:gray;
			font-size:0.8em;
		}
	</style>
</head>
<body>
	<center><h1>Wyszukiwanie</h1></center>
	<ul id="wyszukiwanie">
	</ul>
	<input type="text" placeholder="Treść" id="search_string">
	<button id="confirm" onclick="searchQuery()">Szukaj</button>
</body>
<script>

	function readContactList(){
		$("#Wyszukiwanie").html("");
		$.get("/api/v1/chat/contacts", function(data) {
			console.log(data);
			for(var i in data) {
				var entry = data[i];
				var node = $("<li>"+entry.name+" <span class='email'>"+entry.email+"</span> <button onclick='deleteContact("+entry.id+")'>Usuń</button></li>");
				$("#Wyszukiwanie").append(node);
			}
		});
	}

	function searchQuery(){
		var name = $("#username").val();
		var email = $("#email").val();

		$.post("/api/v1/chat/contacts", {name: name, email: email}, function() {
			readContactList();
		});
	}

	readContactList();

</script>
</html>
