<!DOCTYPE html>
<html>
<head>
	<script src="/jquery.js"></script>
	<meta charset="utf-8">
	<title>Prometheus demo - chat</title>
	<style>
		html{
			background-color:gray;
		}
		body{
			padding:20px;
			background-color:white;
			font-family:sans-serif;
			max-width:50rem;
			margin:0 auto;
		}
	</style>
</head>
<body>
	<h1>
		Prometheus demo - chat application
	</h1>
	<nav>
		<ul>
			<li>
				<a href="/kontakty.html">Lista Kontaktów</a>
			</li>	
			<li>
				<a href="/konwersacje.html">Konwersacje</a>
			</li>
			<li>
				<a href="/administrator.html">Panel administracyjny</a>
			</li>
			<li>
				<a href="me.html">Mój profil</a>
			</li>
			<li>
				<a href="/logout.html">wyloguj</a>
			</li>
		</ul>
	</nav>
</body>
<script>

	var user_id = document.location.hash.slice(1);	

	var base_url = "/api/v1/user/" + user_id;
	console.log(base_url);
	function checkData(){
		$("#dane").html("");
		$.get(base_url, function(data) {
				console.log(data);
				var entry = data;
				var node = $("<li>Username: <input type='text' id='username' value='"+entry.username+"'></li>");
				$("#dane").append(node);
		});
	}

	function updateData(){
		var username = $("#username").val();

		$.ajax({
			url: '/api/v1/user',
			data: {username: user_name, 
				   new_user_data: { username : username }
				},
			type: 'PUT',
			success: function(result){
				checkData();
			}
		});
	}

	checkData();

</script>
</html>